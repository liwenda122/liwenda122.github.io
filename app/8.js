webpackJsonp([8],{18:function(e,t){"use strict";e.exports={post:function(e,t){return new Promise(function(t,a){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="application/json",r.onload=function(){200===r.status?t(r.response):a(Error("request didn't load successfully; error code:"+r.statusText))},r.onerror=function(){a(Error("There was a network error."))},r.send()})}}},500:function(e,t,a){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),o=a(1),i=r(o);t.default={data:function(){var e=[{path:"/",name:"首页"},{path:"",name:"报表"},{path:"/reports/settleOrder/settleOrderList",name:"结算单汇总"}];return{crumbs:e,formSearch:{date:[],status:"",purchaseno:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},filter:"",list:[],totalAmount:0,pageData:{pageNo:1,pageSize:10,totalCount:0,totalPage:1},loading:!0}},methods:{onSubmit:function(){this.refresh()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageData.pageSize=e,this.refresh()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageData.pageNo=e,this.refresh()},detail:function(e){this.$router.push({path:"/reports/settleOrder/settleOrderDetail",query:{id:e.receiptId,time:e.settlementTime,name:e.settlementUserName}})},refresh:function(){this.loading=!0;var t={filter:this.formSearch.purchaseno,pageNo:this.pageData.pageNo,pageSize:this.pageData.pageSize};t.startTime=this.formSearch.date.length>0&&this.formSearch.date[0]?(0,i.default)(this.formSearch.date[0]).format("YYYY-MM-DD"):"",t.endTime=this.formSearch.date.length>1&&this.formSearch.date[1]?(0,i.default)(this.formSearch.date[1]).format("YYYY-MM-DD"):"",e.post(urls.settleOrder,t,this).then(function(e){200==e.code&&(this.pageData.pageNo=e.result.pageNo,this.pageData.pageSize=e.result.pageSize,this.pageData.totalCount=e.result.totalCount,this.pageData.totalPage=e.result.totalPage,this.list=e.result.pmsSettlementOrderReportVos,this.totalAmount=e.result.totalAmount),this.loading=!1})},handleExport:function(){e.export("/pms/report/settle/order/export.do",{filter:this.formSearch.purchaseno,startTime:this.formSearch.date.length>0&&this.formSearch.date[0]?(0,i.default)(this.formSearch.date[0]).format("YYYY-MM-DD"):"",endTime:this.formSearch.date.length>1&&this.formSearch.date[1]?(0,i.default)(this.formSearch.date[1]).format("YYYY-MM-DD"):""})}},created:function(){this.refresh()},computed:(0,n.mapState)({user:function(e){return e.user}})}}).call(t,a(18))},530:function(e,t,a){t=e.exports=a(8)(),t.push([e.id,".button-bar .el-button[data-v-3a4aa8fc]{float:right}.button-bar .el-row[data-v-3a4aa8fc]{float:left;line-height:36px}",""])},566:function(e,t,a){a(600);var r=a(12)(a(500),a(583),"data-v-3a4aa8fc",null);e.exports=r.exports},583:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-layout",{attrs:{crumbs:e.crumbs}},[a("div",{staticClass:"content",slot:"content"},[a("div",{staticClass:"search-bar"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formSearch}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"220px"},attrs:{type:"daterange",align:"right",placeholder:"选择日期范围","picker-options":e.pickerOptions},model:{value:e.formSearch.date,callback:function(t){e.formSearch.date=t},expression:"formSearch.date"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入采购单号"},model:{value:e.formSearch.purchaseno,callback:function(t){e.formSearch.purchaseno=t},expression:"formSearch.purchaseno"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-content"},[a("div",{staticClass:"button-bar"},[a("el-button",{on:{click:e.handleExport}},[e._v("导出")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[e._v("结算总额："),a("span",{staticClass:"orange"},[e._v("¥"+e._s(e._f("number")(e.totalAmount)))])])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"玩命加载中",data:e.list,height:"442",border:""}},[a("el-table-column",{attrs:{label:"序号",width:"70"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e._v(e._s(e.$index+1+e.pageData.pageSize*(e.pageData.pageNo-1)))])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{prop:"purchaseNo",label:"采购单号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivedAmount",label:"结算金额","min-width":"100"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e._v(e._s(e._f("number")(e.row.receivedAmount)))])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{label:"结算时间","min-width":"120"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e._v(e._s(e._f("moment")(e.row.settlementTime)))])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{prop:"settlementUserName",label:"结算人","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{context:e._self,label:"操作","min-width":"80"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.detail(e.row)}}},[e._v("查看")])],1)},staticRenderFns:[]}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.pageData.pageNo,"page-sizes":[10,20,30,40],"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])]),e._v(" "),a("transition",{on:{leave:e.refresh}},[a("router-view")],1)],1)},staticRenderFns:[]}},600:function(e,t,a){var r=a(530);"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);a(13)("a183fd94",r,!0)}});