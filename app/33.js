webpackJsonp([33],{3:function(t,e){"use strict";t.exports={post:function(t,e,a){var n=a.$http||this.$http,s=a.$message||this.$message,r=e?{requestData:JSON.stringify(e)}:null;return n({method:"POST",url:t,body:r,emulateJSON:!0}).then(function(t){return t.body}).then(function(t){return 200!=t.code&&s({message:t.message,type:"warning"}),t})},postJSON:function(t,e,a){var n=a.$http||this.$http,s=a.$message||this.$message,r=e?e:null;return n({method:"POST",url:t,body:r,emulateJSON:!0}).then(function(t){return t.body}).then(function(t){return 200!=t.code&&s({message:t.message,type:"warning"}),t})},export:function(t,e){var a=t;for(var n in e)a=a.indexOf("?")==-1?a+"?"+n+"="+e[n]:a+"&"+n+"="+e[n];window.location.href=a},message:function(){}}},488:function(t,e,a){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=a(7),r=a(1);n(r);e.default={data:function(){var t=[{path:"/",name:"首页"},{path:"/checkout",name:"结算单"},{path:"/checkout/detail",name:"与供应商结算"}],e={status:""},a=[],n={},s={};return{crumbs:t,formSearch:e,tableData:a,orderData:n,pmsSettlementAmountVo:s,loading:!0,receiptId:"",role:"1"}},methods:{onSubmit:function(){this.fetchData()},handleChangeTab:function(t,e){1==t.name&&this.$router.push({name:"checkoutDetail",params:{id:this.receiptId,role:"1"}}),0==t.name&&this.$router.push({name:"checkoutDetail",params:{id:this.receiptId,role:"0"}}),this.receiptId=this.$route.params.id,this.role=this.$route.params.role,1==this.role?this.crumbs=[{path:"/",name:"首页"},{path:"/checkout",name:"结算单"},{path:"/checkout/detail",name:"与供应商结算"}]:this.crumbs=[{path:"/",name:"首页"},{path:"/checkout",name:"结算单"},{path:"/checkout/detail",name:"与采购员结算"}],this.fetchData()},handleExport:function(){t.export("/pms/settlement/order/show/export.do",{receiptId:this.receiptId,settlementReceiver:this.role})},handlePrint:function(){this.$router.push({name:"checkoutPrint",params:{id:this.receiptId,role:this.role}})},handleView:function(t){this.$router.push({name:"checkoutViewMaterial",params:{id:this.receiptId,role:this.role,userid:t}})},handleCheckout:function(t){this.$router.push({name:"doCheckout",params:{id:this.receiptId,role:this.role,userid:t}})},handleBackToList:function(){this.$router.push({path:"/checkout"})},fetchData:function(){var t=this;this.loading=!0;var e={receiptId:this.receiptId,settlementStatus:this.formSearch.status,settlementReceiver:this.role};this.$http({url:"/pms/settlement/order/data.do",method:"POST",body:{requestData:JSON.stringify(e)},emulateJSON:!0}).then(function(t){return t.body}).then(function(e){200==e.code?t.orderData=e.result:t.$message({message:e.message,type:"warning"})}),this.$http({url:"/pms/settlement/order/show.do",method:"POST",body:{requestData:JSON.stringify(e)},emulateJSON:!0}).then(function(t){return t.body}).then(function(e){200==e.code?(t.tableData=e.result.pmsSettlementOrderVos,t.pmsSettlementAmountVo=e.result.pmsSettlementAmountVo):(t.tableData=[],t.$message({message:e.message,type:"warning"})),t.loading=!1})}},created:function(){this.receiptId=this.$route.params.id,this.role=this.$route.params.role,1==this.role?this.crumbs=[{path:"/",name:"首页"},{path:"/checkout",name:"结算单"},{path:"/checkout/detail",name:"与供应商结算"}]:this.crumbs=[{path:"/",name:"首页"},{path:"/checkout",name:"结算单"},{path:"/checkout/detail",name:"与采购员结算"}],this.fetchData()},computed:(0,s.mapState)({user:function(t){return t.user}})}}).call(e,a(3))},590:function(t,e,a){e=t.exports=a(4)(),e.push([t.id,".order-bar[data-v-b04906ec]{color:#99a9bf;font-size:18px;padding:14px 0}.order-bar .right[data-v-b04906ec]{font-size:14px}.tabs-bar[data-v-b04906ec]{padding:0}.el-tabs[data-v-b04906ec]{display:block}.button-bar[data-v-b04906ec]{border:none!important;padding:0 0 12px!important}.button-bar .form-filter[data-v-b04906ec]{float:right}.button-bar .form-filter .el-form-item[data-v-b04906ec]{margin-bottom:0}.button-bar .form-filter .el-select[data-v-b04906ec]{width:110px}.submit-con[data-v-b04906ec]{padding:20px 0;color:#475669}.submit-con .orange[data-v-b04906ec]{color:#f60}.submit-con .left[data-v-b04906ec],.submit-con .middle[data-v-b04906ec]{line-height:36px;height:36px}.submit-con .middle[data-v-b04906ec]{text-align:center}.submit-con .middle .tooltips[data-v-b04906ec]{padding-left:10px}.submit-con .right[data-v-b04906ec]{text-align:right}",""])},622:function(t,e,a){var n,s;a(759),n=a(488);var r=a(708);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,s._scopeId="data-v-b04906ec",t.exports=n},708:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("common-layout",{attrs:{crumbs:t.crumbs}},[a("div",{staticClass:"content",slot:"content"},[a("div",{staticClass:"table-content"},[a("div",{staticClass:"order-bar"},[a("el-row",{attrs:{justify:"space-between"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content left"},[t._v("结算")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"grid-content right"},[a("el-row",[a("el-col",{attrs:{span:8}},[t._v("采购单号："+t._s(t.orderData.purchaseNo))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("开单人："+t._s(t.orderData.purchaserName))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("开单时间："+t._s(t._f("moment")(t.orderData.purchaseTime)))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[t._v("收货人："+t._s(t.orderData.receiverName))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("收货时间："+t._s(t._f("moment")(t.orderData.receivedTime)))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[t._v("备注："+t._s(t.orderData.remark))])],1)],1)])],1)],1),t._v(" "),a("div",{staticClass:"tabs-bar"},[a("el-tabs",{attrs:{type:"card","active-name":t.role},on:{"tab-click":t.handleChangeTab}},[a("el-tab-pane",{attrs:{label:"与供应商结算",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"与采购员结算",name:"0"}})],1)],1),t._v(" "),a("div",{staticClass:"button-bar"},[a("el-button",{on:{click:t.handleExport}},[t._v("导出")]),t._v(" "),a("el-button",{on:{click:t.handlePrint}},[t._v("打印")]),t._v(" "),a("el-form",{staticClass:"form-filter",attrs:{inline:!0,model:t.formSearch}},[a("el-form-item",[a("el-select",{directives:[{name:"model",rawName:"v-model",value:t.formSearch.status,expression:"formSearch.status"}],attrs:{clearable:"",placeholder:"状态"},domProps:{value:t.formSearch.status},on:{input:function(e){t.formSearch.status=e}}},[a("el-option",{attrs:{label:"未结清",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"已结清",value:"1"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"玩命加载中",data:t.tableData,height:"340",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),t._v(" "),1==t.role?a("el-table-column",{attrs:{prop:"name",label:"供应商名称","min-width":"120"}}):t._e(),t._v(" "),0==t.role?a("el-table-column",{attrs:{prop:"name",label:"采购员姓名","min-width":"120"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseCount",label:"采购项数","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalPayment",label:"合计金额（元）","min-width":"150"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t._f("number")(t.row.totalPayment)))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"实付金额（元）","min-width":"150"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t._f("number")(t.row.payment)))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{prop:"settlementStatus",label:"状态","min-width":"120"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tag",{attrs:{type:0==t.row.settlementStatus?"primary":"success","close-transition":""}},[t._v(t._s(0==t.row.settlementStatus?"未结清":"已结清"))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{context:t._self,label:"操作","min-width":"120",fixed:"right"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[0==t.row.settlementStatus?a("el-button",{attrs:{type:"orange",size:"small"},on:{click:function(e){t.handleCheckout(t.row.id)}}},[t._v("结算")]):t._e(),t._v(" "),1==t.row.settlementStatus?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleView(t.row.id)}}},[t._v("查看")]):t._e()],1)},staticRenderFns:[]}})],1),t._v(" "),a("div",{staticClass:"submit-con"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content left"},[t._v("\n\t\t\t\t\t\t\t总计："),a("span",{staticClass:"orange"},[t._v(t._s(t.pmsSettlementAmountVo.totalPayment))]),t._v("元\n\t\t\t\t\t\t")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content left"},[t._v("\n\t\t\t\t\t\t\t已付："),a("span",{staticClass:"orange"},[t._v(t._s(t.pmsSettlementAmountVo.payment))]),t._v("元\n\t\t\t\t\t\t")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content left"},[t._v("\n\t\t\t\t\t\t\t未付："),a("span",{staticClass:"orange"},[t._v(t._s(t.pmsSettlementAmountVo.nonPayment))]),t._v("元\n\t\t\t\t\t\t")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content left"},[t._v("\n\t\t\t\t\t\t\t数量："),a("span",{staticClass:"orange"},[t._v(t._s(t.pmsSettlementAmountVo.purchaseCount))]),t._v("项\n\t\t\t\t\t\t")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content right"},[a("el-button",{attrs:{type:"orange"},on:{click:t.handleBackToList}},[t._v("确认")])],1)])],1)],1)],1)])])},staticRenderFns:[]}},759:function(t,e,a){var n=a(590);"string"==typeof n&&(n=[[t.id,n,""]]);a(5)(n,{});n.locals&&(t.exports=n.locals)}});