webpackJsonp([45],{490:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(7),o=a(1),s=n(o);e.default={data:function(){var t=[{path:"/",name:"首页"},{path:"/checkout",name:"结算单"}],e={date:[],status:"",purchaseno:""},a=[],n={},i={shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},o={pageNo:1,pageSize:10,totalCount:0,totalPage:1};return{crumbs:t,formSearch:e,tableData:a,pmsSettlementAmountVo:n,pickerOptions:i,pageData:o,loading:!0,dialogVisible:!1}},methods:{showDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},onSubmit:function(){this.fetchData()},onCreatePO:function(){this.$router.push({path:"/purchase/create"})},handleView:function(t){this.$router.push({name:"checkoutView",params:{id:t}})},handleCheckout:function(t){this.$router.push({name:"checkoutDetail",params:{id:t,role:"1"}})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageData.pageSize=t,this.fetchData()},handleCurrentChange:function(t){console.log("当前页: "+t),this.pageData.pageNo=t,this.fetchData()},filterStatus:function(t,e){return e.settlementStatus===t},fetchData:function(){var t=this;this.loading=!0;var e={settlementStatus:this.formSearch.status,filter:this.formSearch.purchaseno,pageNo:this.pageData.pageNo,pageSize:this.pageData.pageSize};e.startTime=this.formSearch.date.length>0&&this.formSearch.date[0]?(0,s.default)(this.formSearch.date[0]).format("YYYY-MM-DD"):"",e.endTime=this.formSearch.date.length>1&&this.formSearch.date[1]?(0,s.default)(this.formSearch.date[1]).format("YYYY-MM-DD"):"",this.$http({url:"/pms/settlement/order/list.do",method:"POST",body:{requestData:JSON.stringify(e)},emulateJSON:!0}).then(function(t){return t.body}).then(function(e){200==e.code?(t.tableData=e.result.pmsSettlementVos,t.pmsSettlementAmountVo=e.result.pmsSettlementAmountVo,t.pageData.pageNo=e.result.pageNo,t.pageData.pageSize=e.result.pageSize,t.pageData.totalCount=e.result.totalCount,t.pageData.totalPage=e.result.totalPage):(t.tableData=[],t.$message({message:e.message,type:"warning"})),t.loading=!1})}},created:function(){this.fetchData()},computed:(0,i.mapState)({user:function(t){return t.user}})}},564:function(t,e,a){e=t.exports=a(4)(),e.push([t.id,".search-bar .el-select[data-v-29ca9829]{width:110px}.button-bar[data-v-29ca9829]{font-size:14px;color:#475669}.button-bar .orange[data-v-29ca9829]{color:#f60;padding-left:3px}.what_onCreatePO[data-v-29ca9829]{position:absolute;right:8px;top:0;color:#ff5f00;font-size:16px;cursor:pointer;line-height:60px}.dialogContent[data-v-29ca9829]{max-height:500px;overflow:auto}.dialog[data-v-29ca9829]{max-width:660px;margin:0 auto}.dialog h1[data-v-29ca9829]{font-size:20px;text-align:center;margin-bottom:40px;color:#333;font-weight:700}.dialog h3[data-v-29ca9829]{margin-bottom:15px;font-weight:700;color:#333;font-size:16px}.dialog h3 .h3Tips[data-v-29ca9829]{display:inline-block;width:23px;height:23px;line-height:23px;margin-right:10px;background-color:#20a0ff;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;text-align:center;color:#fff}.dialog .function[data-v-29ca9829]{margin-bottom:15px}.dialog .function .blue[data-v-29ca9829]{color:#20a0ff}.dialog button[data-v-29ca9829]{margin:0 5px}.dialog .text[data-v-29ca9829]{padding:0 35px;line-height:25px}.dialog .centent[data-v-29ca9829]{margin-bottom:40px}.dialog img[data-v-29ca9829]{min-height:221px}.dialog .mt20[data-v-29ca9829]{margin-top:20px}",""])},624:function(t,e,a){var n,i;a(733),n=a(490);var o=a(680);i=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(i=n=n.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,i._scopeId="data-v-29ca9829",t.exports=n},680:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("common-layout",{attrs:{crumbs:t.crumbs}},[a("div",{staticClass:"content",slot:"content"},[a("div",{staticClass:"search-bar"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formSearch}},[a("el-form-item",[a("el-select",{directives:[{name:"model",rawName:"v-model",value:t.formSearch.status,expression:"formSearch.status"}],attrs:{clearable:"",placeholder:"状态"},domProps:{value:t.formSearch.status},on:{change:t.onSubmit,input:function(e){t.formSearch.status=e}}},[a("el-option",{attrs:{label:"未结清",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"已结清",value:"1"}})],1)],1),t._v(" "),a("el-form-item",[a("el-date-picker",{directives:[{name:"model",rawName:"v-model",value:t.formSearch.date,expression:"formSearch.date"}],staticStyle:{width:"220px"},attrs:{type:"daterange",align:"right",placeholder:"选择日期范围","picker-options":t.pickerOptions},domProps:{value:t.formSearch.date},on:{input:function(e){t.formSearch.date=e}}})],1),t._v(" "),a("el-form-item",[a("el-input",{directives:[{name:"model",rawName:"v-model",value:t.formSearch.purchaseno,expression:"formSearch.purchaseno"}],attrs:{placeholder:"请输入采购单号"},domProps:{value:t.formSearch.purchaseno},on:{input:function(e){t.formSearch.purchaseno=e}}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"table-content"},[a("div",{staticClass:"button-bar"},[a("el-row",[a("el-col",{attrs:{span:4}},[t._v("总计金额："),a("span",{staticClass:"orange"},[t._v("¥"+t._s(t.pmsSettlementAmountVo.totalPayment))])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("已付金额："),a("span",{staticClass:"orange"},[t._v("¥"+t._s(t.pmsSettlementAmountVo.payment))])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("未付金额："),a("span",{staticClass:"orange"},[t._v("¥"+t._s(t.pmsSettlementAmountVo.nonPayment))])])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"玩命加载中",data:t.tableData,height:"442",border:""}},[a("el-table-column",{attrs:{label:"序号",width:"70"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t.$index+1+t.pageData.pageSize*(t.pageData.pageNo-1)))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseNo",label:"采购单号","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"已付金额（元）","min-width":"150"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t._f("number")(t.row.payment)))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{prop:"nonPayment",label:"未付金额（元）","min-width":"150"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t._f("number")(t.row.nonPayment)))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{label:"结算时间","min-width":"150"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t._f("moment")(t.row.settlementTime)))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{prop:"settlementStatus",label:"状态","min-width":"100"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tag",{attrs:{type:0==t.row.settlementStatus?"primary":"success","close-transition":""}},[t._v(t._s(0==t.row.settlementStatus?"未结清":"已结清"))])},staticRenderFns:[]}}),t._v(" "),a("el-table-column",{attrs:{context:t._self,label:"操作","min-width":"120"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[0==t.row.settlementStatus?a("el-button",{attrs:{type:"orange",size:"small"},on:{click:function(e){t.handleCheckout(t.row.receiptId)}}},[t._v("结算")]):t._e(),t._v(" "),1==t.row.settlementStatus?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleView(t.row.receiptId)}}},[t._v("查看")]):t._e()],1)},staticRenderFns:[]}})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pageData.pageNo,"page-sizes":[10,20,30,40],"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("span",{staticClass:"what_onCreatePO",on:{click:t.showDialog}},[t._v("如何结算？")])])]),t._v(" "),a("el-dialog",{directives:[{name:"model",rawName:"v-model",value:t.dialogVisible,expression:"dialogVisible"}],attrs:{title:"帮助",size:"large"},domProps:{value:t.dialogVisible},on:{close:t.closeDialog,input:function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialogContent"},[a("div",{staticClass:"dialog"},[a("h1",[t._v("如何收货？")]),t._v(" "),a("h3",[a("span",{staticClass:"h3Tips"},[t._v("1")]),t._v("第一步：选择结算对象，点击“"),a("el-button",{attrs:{size:"small",type:"orange"}},[t._v("结算")]),t._v("”进入>结算页面。")],1),t._v(" "),a("div",{staticClass:"centent text"},[a("img",{attrs:{src:"http://kd-oss.oss-cn-hangzhou.aliyuncs.com/image/kdrmspms/jiesuan1.png"}})]),t._v(" "),a("h3",[a("span",{staticClass:"h3Tips"},[t._v("2")]),t._v("第二步：确认物料、金额，选择支付方式支付。")]),t._v(" "),a("div",{staticClass:"centent text"},[a("img",{attrs:{src:"http://kd-oss.oss-cn-hangzhou.aliyuncs.com/image/kdrmspms/jisuan2.png"}}),t._v(" "),a("p",{staticClass:"function mt20"},[a("span",{staticClass:"blue"},[t._v("| ")]),t._v("实付金额默认需付金额，可根据实际情况修改，选择支付方式，自动提示添加供应商时添加的支付账号。")])]),t._v(" "),a("h3",[a("span",{staticClass:"h3Tips"},[t._v("3")]),t._v("第三步：完成结算")]),t._v(" "),a("div",{staticClass:"centent text"},[a("p",[t._v("所有物料都结算完后，点击确认，完成整笔订单的结算，可分批结算")])])])])])],1)},staticRenderFns:[]}},733:function(t,e,a){var n=a(564);"string"==typeof n&&(n=[[t.id,n,""]]);a(5)(n,{});n.locals&&(t.exports=n.locals)}});