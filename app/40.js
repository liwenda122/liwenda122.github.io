webpackJsonp([40],{503:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),i=a(1),s=r(i);t.default={data:function(){var e=[{path:"/",name:"首页"},{path:"/receives/direct",name:"直接新增收货单"}],t={date:"",status:"",purchaseno:""},a=[],r={shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},n={pageNo:1,pageSize:10,totalCount:0,totalPage:1};return{crumbs:e,formSearch:t,tableData:a,pickerOptions:r,pageData:n,loading:!0}},methods:{createRO:function(){this.$router.push({path:"/receives/direct/create"})},onSubmit:function(){this.fetchData()},handleView:function(e){this.$router.push({name:"receivesView",params:{id:e,source:2}})},handleSizeChange:function(e){this.pageData.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.pageData.pageNo=e,this.fetchData()},filterStatus:function(e,t){return t.receiptStatus===e},fetchData:function(){var e=this;this.loading=!0;var t={filter:this.formSearch.purchaseno,pageNo:this.pageData.pageNo,pageSize:this.pageData.pageSize};t.startTime=this.formSearch.date.length>0&&this.formSearch.date[0]?(0,s.default)(this.formSearch.date[0]).format("YYYY-MM-DD"):"",t.endTime=this.formSearch.date.length>1&&this.formSearch.date[1]?(0,s.default)(this.formSearch.date[1]).format("YYYY-MM-DD"):"",this.$http({url:"/pms/receipt/direct/list.do",method:"POST",body:{requestData:JSON.stringify(t)},emulateJSON:!0}).then(function(e){return e.body}).then(function(t){200==t.code?(e.tableData=t.result.pmsReceiptOrderVos,e.pageData.pageNo=t.result.pageNo,e.pageData.pageSize=t.result.pageSize,e.pageData.totalCount=t.result.totalCount,e.pageData.totalPage=t.result.totalPage):(e.tableData=[],e.$message({message:t.message,type:"warning"})),e.loading=!1})},handleChangeTab:function(e,t){1==e.name&&this.$router.push({path:"/receives"})}},created:function(){this.fetchData()},computed:(0,n.mapState)({user:function(e){return e.user}})}},572:function(e,t,a){t=e.exports=a(4)(),t.push([e.id,".el-tabs[data-v-5d852938]{display:block}.search-bar[data-v-5d852938]{padding-top:0}.search-bar .el-button[data-v-5d852938]{float:left}.search-bar .form-inline[data-v-5d852938]{float:right}",""])},636:function(e,t,a){var r,n;a(741),r=a(503);var i=a(690);n=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(n=r=r.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,n._scopeId="data-v-5d852938",e.exports=r},690:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("common-layout",{attrs:{crumbs:e.crumbs}},[a("div",{staticClass:"content",slot:"content"},[a("div",{staticClass:"tabs-bar"},[a("el-tabs",{attrs:{type:"card","active-name":"2"},on:{"tab-click":e.handleChangeTab}},[a("el-tab-pane",{attrs:{label:"根据采购单收货",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"直接新增收货单",name:"2"}})],1)],1),e._v(" "),a("div",{staticClass:"search-bar clearfix"},[a("el-button",{attrs:{type:"orange"},on:{click:e.createRO}},[e._v("新增收货单")]),e._v(" "),a("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.formSearch}},[a("el-form-item",[a("el-date-picker",{directives:[{name:"model",rawName:"v-model",value:e.formSearch.date,expression:"formSearch.date"}],staticStyle:{width:"220px"},attrs:{type:"daterange",align:"right",placeholder:"选择收货日期范围","picker-options":e.pickerOptions},domProps:{value:e.formSearch.date},on:{input:function(t){e.formSearch.date=t}}})],1),e._v(" "),a("el-form-item",[a("el-input",{directives:[{name:"model",rawName:"v-model",value:e.formSearch.purchaseno,expression:"formSearch.purchaseno"}],attrs:{placeholder:"请输入采购单号"},domProps:{value:e.formSearch.purchaseno},on:{input:function(t){e.formSearch.purchaseno=t}}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"玩命加载中",data:e.tableData,height:"442",border:""}},[a("el-table-column",{attrs:{label:"序号",width:"70"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e._v(e._s(e.$index+1+e.pageData.pageSize*(e.pageData.pageNo-1)))])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{prop:"purchaseNo",label:"采购单号","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiveTime",label:"收货日期","min-width":"120"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e._v(e._s(e._f("moment")(e.row.receiveTime)))])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{label:"收货人","min-width":"120"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e._v(e._s(e.row.receiverName?e.row.receiverName:"--"))])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiptStatus",label:"状态","min-width":"100"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tag",{attrs:{type:0==e.row.receiptStatus?"primary":"success","close-transition":""}},[e._v(e._s(0==e.row.receiptStatus?"未收货":1==e.row.status?"已发货未收货":"已收货"))])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{context:e._self,label:"操作","min-width":"100"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleView(e.row.receiptId)}}},[e._v("查看")])],1)},staticRenderFns:[]}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.pageData.pageNo,"page-sizes":[10,20,30,40],"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])])},staticRenderFns:[]}},741:function(e,t,a){var r=a(572);"string"==typeof r&&(r=[[e.id,r,""]]);a(5)(r,{});r.locals&&(e.exports=r.locals)}});